/**
 * @fileoverview Firestore Security Rules for Tambola Game.
 *
 * Core Philosophy:
 * This ruleset allows public read access to game and called number data while restricting write access.
 * This approach is suitable given that the application has no concept of roles or ownership beyond anonymous users.
 *
 * Data Structure:
 * - /tambola_games/{gameId}: Stores Tambola game sessions.
 * - /tambola_games/{gameId}/called_numbers/{numberId}: Stores numbers called during a game.
 *
 * Key Security Decisions:
 * - Public read access for all game data.
 * - No write access granted to any client.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows public read access to Tambola game sessions.  No write access is granted.
     * @path /tambola_games/{gameId}
     * @allow (get, list) - Any user can read game session data.
     * @deny (create, update, delete) - No user can create, update, or delete game session data.
     * @principle Allows public read access with no write access.
     */
    match /tambola_games/{gameId} {
      allow get: if true;
      allow list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows public read access to called numbers within a Tambola game. No write access is granted.
     * @path /tambola_games/{gameId}/called_numbers/{numberId}
     * @allow (get, list) - Any user can read called number data.
     * @deny (create, update, delete) - No user can create, update, or delete called number data.
     * @principle Allows public read access with no write access.
     */
    match /tambola_games/{gameId}/called_numbers/{numberId} {
      allow get: if true;
      allow list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }
  }
}