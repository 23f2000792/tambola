/**
 * @file Firestore Security Rules
 * @core_philosophy This ruleset enforces a public-access model for all data.
 *   All read and write operations are allowed for all users, authenticated or anonymous.
 *   This is intended for prototyping purposes only and should be replaced with a more
 *   restrictive security model for production use.
 * @data_structure The data is organized into a top-level collection of `tambola_games`,
 *   each containing a subcollection of `called_numbers`. There are no user-specific
 *   collections or subcollections.
 * @key_security_decisions All reads and writes are allowed. No authorization checks are performed.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows any user to read or write Tambola game sessions.
     * @path /tambola_games/{gameId}
     * @allow (create) Any user can create a new Tambola game session.
     * @allow (get) Any user can read a Tambola game session.
     * @allow (list) Any user can list all Tambola game sessions.
     * @allow (update) Any user can update a Tambola game session.
     * @allow (delete) Any user can delete a Tambola game session.
     * @principle Allows any operation on the document.
     */
    match /tambola_games/{gameId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows any user to read or write called numbers for a specific Tambola game.
     * @path /tambola_games/{gameId}/called_numbers/{numberId}
     * @allow (create) Any user can create a new called number.
     * @allow (get) Any user can read a called number.
     * @allow (list) Any user can list all called numbers for a game.
     * @allow (update) Any user can update a called number.
     * @allow (delete) Any user can delete a called number.
     * @principle Allows any operation on the document.
     */
    match /tambola_games/{gameId}/called_numbers/{numberId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }
  }
}